<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
   <canvas id="canvas" width="300px" height="300px"></canvas>
   <button id="eraser">橡皮擦</button>
</body>
<script>
    var yyy = document.getElementById('canvas');
        page()
    window.onresize = function(){
        page()
    }
    
    

    function page(){
        var pageWidth = document.documentElement.clientWidth
        var pageHeight= document.documentElement.clientHeight
        yyy.width = pageWidth
        yyy.height = pageHeight
    }

    




    var context = yyy.getContext('2d');
    var using = false
    var lastPoint = {
        x : undefined,
        y : undefined
    }
    yyy.onmousedown = function(aaa){
        

        var x = aaa.clientX
        var y = aaa.clientY
       
        using = true
    if (usingEraser){
        
        context.clearRect(x,y,10,10)
    }
    else{
       
        lastPoint = {"x":x,"y":y}
        //drawCircle(x,y,0.1)
    }
    }

    yyy.onmousemove = function(aaa){
        var x = aaa.clientX
        var y = aaa.clientY

        
        if (usingEraser){
            if(using){
            context.clearRect(x,y,10,10)
    }
    }
    else{
        if(using){
        
        var newPoint = {"x":x,"y":y}
        //drawCircle(x,y,0.1)
        drawline(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)
        lastPoint = newPoint
    }
        
        
    }
        
    }
    yyy.onmouseup = function(aaa){
        using = false
    }



    function drawCircle(x,y,radius){
        context.beginPath()
        //context.strokeStyle = 'red'
    context.arc(x,y,radius,0,Math.PI*2 )
    context.stroke()
    }

    function drawline(x1,y1,x2,y2){
        
        context.beginPath()
        context.moveTo(x1,y1)
        context.lineWidth = 2
        context.lineTo(x2,y2)
        context.stroke()
        //context.closepath()
}
 
   var usingEraser = false
   eraser.onclock = function(){
    usingEraser = true
    using = !using
    }
 
 
   





</script>
</html>